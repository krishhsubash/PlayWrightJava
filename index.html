<!DOCTYPE html>
<html><head><meta charset='utf-8'/><title>Test Quality Dashboard</title>
<link rel='preconnect' href='https://img.shields.io'>
<style>
 body {font-family: system-ui, Arial, sans-serif; margin: 20px;}
 header {display:flex; gap:1rem; flex-wrap:wrap; align-items:center;}
 nav.breadcrumb {font-size:14px; margin-top:4px;}
 nav.breadcrumb a {text-decoration:none; color:#0366d6;}
 nav.breadcrumb span.sep {color:#555; margin:0 4px;}
 section {margin-top:40px;}
 code {background:#f5f5f5; padding:2px 4px; border-radius:3px;}
 .grid {display:grid; gap:16px; grid-template-columns: repeat(auto-fit, minmax(260px,1fr));}
 .card {border:1px solid #ddd; border-radius:8px; padding:16px; background:#fff; box-shadow:0 1px 2px rgba(0,0,0,0.06);}
 h2 {margin-top:0;}
 a.badge-link img {vertical-align:middle;}
 .sparkline { width:120px; height:30px; }
 #historyFilter { margin-bottom:8px; padding:4px; }
</style></head>
<body>
<header>
    <div>
        <h1 style='margin:0;'>Test Quality Dashboard</h1>
        <nav class='breadcrumb'>
            <a href='./'>Dashboard</a><span class='sep'>/</span><a href='allure/'>Allure</a>
            <span class='sep'>|</span><span>Commit: 9da32f4</span>
            <span class='sep'>|</span><span>Allure: 2025-09-22 06:15:49 UTC</span>
        </nav>
    </div>
  <a class='badge-link' href='extra/trends.html'><img src='badges/flaky-badge.json' alt='Flaky Count (JSON)' hidden></a>
  <img src='https://img.shields.io/endpoint?url=https://krishhsubash.github.io/PlayWrightJava/badges/flaky-badge.json' alt='Flaky'>
  <img src='https://img.shields.io/endpoint?url=https://krishhsubash.github.io/PlayWrightJava/badges/failure-badge.json' alt='Failure Rate'>
  <img src='https://img.shields.io/endpoint?url=https://krishhsubash.github.io/PlayWrightJava/badges/stability-badge.json' alt='Stability'>
</header>
<p>Latest run summary: Total=1 Passed=1 Failed=0 Skipped=0 | Flaky=0 | Failure Rate=0.0% | Stability=100.0</p>
<button id='toggleSparks' style='margin:4px 0;'>Hide Sparklines</button>
<div id='sparkContainer'>
    <canvas id='sparkFailures' class='sparkline'></canvas>
    <canvas id='sparkFlaky' class='sparkline'></canvas>
    <canvas id='sparkFailRate' class='sparkline'></canvas>
    <div style='font-size:12px;color:#555;margin-top:4px;'>Sparklines (left to right): failed tests, flaky candidates, failure rate %. Latest point is rightmost.</div>
</div>
<div class='grid'>
  <div class='card'>
    <h2>Trends</h2>
    <p>View historical charts for failures, failure rate, and flaky candidates.</p>
    <p><a href='extra/trends.html'>Open Trends &raquo;</a></p>
  </div>
    <div class='card'>
        <h2>Allure Report</h2>
        <p>Interactive test report (steps, attachments, traces, videos).</p>
        <p><a href='allure/'>Open Allure &raquo;</a></p>
    </div>
  <div class='card'>
    <h2>Artifacts</h2>
    <p>Per-matrix artifacts (traces, screenshots, videos) available in workflow run artifacts section.</p>
    <p><a href='test-summary.md'>Aggregated Test Summary</a></p>
  </div>
</div>
<section>
<h2>Reliability Formula</h2>
<p>Stability score = <code>100 - failure_rate_percent</code>, where <code>failure_rate_percent = failed / total * 100</code> from the most recent aggregated run.</p>
</section>
<section>
<h2>Flaky Candidates (Latest)</h2>
<ul>
<li>None</li></ul>
</section>
<section>
<h2>Recovered (Flaky Pass) Tests</h2>
<ul>
<li>None</li></ul>
</section>
<section>
<h2>Retry Statistics</h2>
<p>Retried tests: {retry_stats.get('retried_tests',0)} | Recovered: {retry_stats.get('recovered_tests',0)} | Recovery Rate: {retry_stats.get('recovery_rate',0)}%</p>
</section>
<section>
<h2>Recent Run History (Last {len(last_n)})</h2>
<input id='historyFilter' type='text' placeholder='Filter (substring)...'/>
<table id='historyTable' border='1' cellpadding='4' cellspacing='0'>
<thead><tr><th>#</th><th>Timestamp (UTC)</th><th>Total</th><th>Failed</th><th>Flaky</th><th>Fail %</th></tr></thead><tbody>
<tr><td>1</td><td>2025-09-22T06:15:23.261020Z</td><td>1</td><td>0</td><td>0</td><td>0.0%</td></tr></tbody></table>
</section>
<section>
<h2>Failed Test Artifacts (Latest)</h2>
<ul>
<li>None</li></ul>
</section>
<footer style='margin-top:60px;font-size:12px;color:#666;'>Generated dashboard. History length = {len(history)}.</footer>
</body>
<script src='https://cdn.jsdelivr.net/npm/chart.js'></script>
<script>
const failureSeries = {_json.dumps(failure_series)};
const flakySeries = {_json.dumps(flaky_series)};
const failRateSeries = {_json.dumps(fail_rate_series)};
function spark(ctxId, data, color){
    new Chart(document.getElementById(ctxId).getContext('2d'), {type:'line', data:{labels:data.map((_,i)=>i+1), datasets:[{data, borderColor:color, tension:0.3, pointRadius:0}]}, options:{plugins:{legend:{display:false}}, scales:{x:{display:false},y:{display:false}}});}
spark('sparkFailures', failureSeries, '#d33');
spark('sparkFlaky', flakySeries, '#f90');
spark('sparkFailRate', failRateSeries, '#36c');
document.getElementById('toggleSparks').addEventListener('click', ()=>{
    const c = document.getElementById('sparkContainer');
    const btn = document.getElementById('toggleSparks');
    if (c.style.display === 'none') { c.style.display='block'; btn.textContent='Hide Sparklines'; }
    else { c.style.display='none'; btn.textContent='Show Sparklines'; }
});
document.getElementById('historyFilter').addEventListener('input', e => {
    const q = e.target.value.toLowerCase();
    const rows = document.querySelectorAll('#historyTable tbody tr');
    rows.forEach(r=>{ r.style.display = q && !r.innerText.toLowerCase().includes(q) ? 'none':'table-row'; });
});
</script>
</html>